{"ast":null,"code":"var _jsxFileName = \"/home/thanh/booking-sport/sportbook-admin/src/components/custom/PostCard.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport clsx from \"clsx\";\nimport Swal from \"sweetalert2\";\nimport moment from \"moment\";\nimport Card from \"@material-ui/core/Card\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport Delete from \"@material-ui/icons/Delete\";\nimport { red } from \"@material-ui/core/colors\";\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\nimport Colors from \"../../constants/Colors\";\nimport ViewText from \"./ViewText\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport LockIcon from \"@material-ui/icons/Lock\";\nimport { truncateMultilineString } from \"../../utils/formatString\";\nimport { likeReaction } from \"../../store/actions/like\";\nimport ReportModal from \"../pages/post/component/ReportModal\";\nimport { deletePost } from \"../../store/actions/post\";\nimport { Typography } from \"@material-ui/core\";\nimport { BASE_IMAGE_URL } from \"../../store/actions/types\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: \"100%\",\n    height: \"100%\"\n  },\n  media: {\n    height: 0,\n    paddingTop: \"56.25%\" // 16:9\n\n  },\n  expand: {\n    transform: \"rotate(0deg)\",\n    marginLeft: \"auto\",\n    transition: theme.transitions.create(\"transform\", {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: \"rotate(180deg)\"\n  },\n  avatar: {\n    backgroundColor: red[500],\n    cursor: \"pointer\"\n  }\n}));\n\nconst PostCard = ({\n  liked,\n  deletePost,\n  post,\n  likeReaction,\n  isCurrentAuth,\n  authProfile,\n  authId\n}) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [openReportModal, setOpenReportModal] = useState(false);\n  const isAuth = post && post.userId === authId;\n\n  const handleClick = event => {\n    if (!isAuth) {\n      setAnchorEl(event.currentTarget);\n    }\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const {\n    id,\n    title,\n    categoryId,\n    description,\n    status,\n    createdAt,\n    comments,\n    reactions\n  } = post || {};\n  const [loading, setLoading] = useState(false);\n  let imageUrl = \"\";\n\n  if (post && post.user && post.user.imageUrl) {\n    imageUrl = post.user.imageUrl;\n  }\n\n  const [isLiked, setIsLiked] = useState(authProfile && authProfile.userFavoritePosts.find(item => item.id === id));\n  const [totalLike, setTotalLike] = useState(reactions && reactions.length); // update reaction of post\n\n  const handleOnLike = () => {\n    let userInfo = {};\n\n    if (post.user) {\n      userInfo = {\n        id: post.user.id,\n        imageUrl: post.user.imageUrl,\n        firstName: post.user.firstName,\n        lastName: post.user.lastName,\n        githubUsername: post.user.githubUsername\n      };\n    }\n\n    if (status === \"public\") {\n      likeReaction(id, categoryId, title, description, setIsLiked, setTotalLike, userInfo);\n    }\n  };\n\n  useEffect(() => {\n    setIsLiked(authProfile && authProfile.userFavoritePosts.find(item => item.id === id));\n  }, [handleOnLike, setIsLiked]);\n\n  const handleOnReportPost = () => {\n    setOpenReportModal(true);\n    setAnchorEl(null);\n  };\n\n  const handleOnDelete = postId => {\n    Swal.fire({\n      title: `Are you sure to delete ?`,\n      text: \"You won't be able to revert this!\",\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes, delete it!\"\n    }).then(result => {\n      if (result.value) {\n        setLoading(true);\n        deletePost(setLoading, postId);\n      }\n    });\n  };\n\n  const totalComments = comments ? comments.length : 0;\n  const isPrivate = post && status === \"private\";\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    avatar: /*#__PURE__*/React.createElement(Avatar, {\n      onClick: () => history.push(`/user-profile/${post.userId}`),\n      \"aria-label\": \"recipe\",\n      className: classes.avatar,\n      src: imageUrl || BASE_IMAGE_URL,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }\n    }),\n    action: /*#__PURE__*/React.createElement(React.Fragment, null, isPrivate && /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"Private\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"delete\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(LockIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }\n    }))), !isCurrentAuth && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-controls\": \"simple-menu\",\n      \"aria-haspopup\": \"true\",\n      onClick: handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(MoreVertIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Menu, {\n      id: \"simple-menu\",\n      anchorEl: anchorEl,\n      keepMounted: true,\n      open: Boolean(anchorEl),\n      onClose: handleClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: () => handleOnReportPost(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 21\n      }\n    }, \"Report this post\")))),\n    title: post && post.user && post.user.firstName && post.user.lastName ? post.user.firstName + \" \" + post.user.lastName : post.user.username,\n    subheader: moment(createdAt).format(\"LLLL\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"colorPrimary\",\n    style: {\n      fontSize: \"18px\"\n    },\n    component: \"p\",\n    className: \"ml-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }\n  }, title), /*#__PURE__*/React.createElement(CardContent, {\n    className: \"p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ViewText, {\n    textBody: truncateMultilineString(description, 350),\n    className: \"viewMode\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(CardActions, {\n    disableSpacing: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"like\",\n    style: {\n      color: Colors.green\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 11\n    }\n  }, post.view, \" \", post.view > 1 ? \"views\" : \"view\"), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Like\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    style: {\n      color: isLiked || liked ? Colors.like : \"\"\n    },\n    \"aria-label\": \"add to favorites\",\n    onClick: () => handleOnLike(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FavoriteIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"like\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }\n  }, liked ? \"\" : totalLike))), !liked && /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-label\": \"comment\",\n    style: {\n      color: Colors.comment\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ChatIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"like\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 17\n    }\n  }, totalComments))), isCurrentAuth && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Edit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-label\": \"edit\",\n    style: {\n      color: Colors.edit\n    },\n    onClick: () => post && history.push(`/edit-post/${id}`) // window.open(`/edit-post/${id}`, \"_blank\")\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(EditIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 19\n    }\n  }))), window.location.pathname.includes(\"user-profile\") && /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Delete\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-label\": \"detete\",\n    onClick: () => handleOnDelete(id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Delete, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(IconButton, {\n    className: classes.expand,\n    style: {\n      fontSize: \"16px\"\n    },\n    onClick: () => post && history.push(`/view-post/${id}`),\n    \"aria-label\": \"show more\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 11\n    }\n  }, \"MORE\"))), /*#__PURE__*/React.createElement(ReportModal, {\n    postId: post && id,\n    modal: openReportModal,\n    setModal: setOpenReportModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst mapStateToProps = state => ({\n  authProfile: state.user_profile.user_profile,\n  authId: state.auth.user.id\n});\n\nexport default connect(mapStateToProps, {\n  likeReaction,\n  deletePost\n})(PostCard);","map":{"version":3,"sources":["/home/thanh/booking-sport/sportbook-admin/src/components/custom/PostCard.js"],"names":["React","useEffect","useState","makeStyles","connect","useHistory","clsx","Swal","moment","Card","CardHeader","CardContent","CardActions","Avatar","IconButton","EditIcon","Delete","red","FavoriteIcon","Tooltip","MoreVertIcon","ChatIcon","Colors","ViewText","Menu","MenuItem","LockIcon","truncateMultilineString","likeReaction","ReportModal","deletePost","Typography","BASE_IMAGE_URL","useStyles","theme","root","width","height","media","paddingTop","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","backgroundColor","cursor","PostCard","liked","post","isCurrentAuth","authProfile","authId","classes","history","anchorEl","setAnchorEl","openReportModal","setOpenReportModal","isAuth","userId","handleClick","event","currentTarget","handleClose","id","title","categoryId","description","status","createdAt","comments","reactions","loading","setLoading","imageUrl","user","isLiked","setIsLiked","userFavoritePosts","find","item","totalLike","setTotalLike","length","handleOnLike","userInfo","firstName","lastName","githubUsername","handleOnReportPost","handleOnDelete","postId","fire","text","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","value","totalComments","isPrivate","push","Boolean","username","format","fontSize","color","green","view","like","comment","edit","window","location","pathname","includes","mapStateToProps","state","user_profile","auth"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport clsx from \"clsx\";\nimport Swal from \"sweetalert2\";\nimport moment from \"moment\";\nimport Card from \"@material-ui/core/Card\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport Delete from \"@material-ui/icons/Delete\";\nimport { red } from \"@material-ui/core/colors\";\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\nimport Colors from \"../../constants/Colors\";\nimport ViewText from \"./ViewText\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport LockIcon from \"@material-ui/icons/Lock\";\nimport { truncateMultilineString } from \"../../utils/formatString\";\nimport { likeReaction } from \"../../store/actions/like\";\nimport ReportModal from \"../pages/post/component/ReportModal\";\nimport { deletePost } from \"../../store/actions/post\";\nimport { Typography } from \"@material-ui/core\";\nimport { BASE_IMAGE_URL } from \"../../store/actions/types\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    height: \"100%\",\n  },\n  media: {\n    height: 0,\n    paddingTop: \"56.25%\", // 16:9\n  },\n  expand: {\n    transform: \"rotate(0deg)\",\n    marginLeft: \"auto\",\n    transition: theme.transitions.create(\"transform\", {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: \"rotate(180deg)\",\n  },\n  avatar: {\n    backgroundColor: red[500],\n    cursor: \"pointer\",\n  },\n}));\n\nconst PostCard = ({\n  liked,\n  deletePost,\n  post,\n  likeReaction,\n  isCurrentAuth,\n  authProfile,\n  authId,\n}) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  const [openReportModal, setOpenReportModal] = useState(false);\n  const isAuth = post && post.userId === authId;\n\n  const handleClick = (event) => {\n    if (!isAuth) {\n      setAnchorEl(event.currentTarget);\n    }\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const {\n    id,\n    title,\n    categoryId,\n    description,\n    status,\n    createdAt,\n    comments,\n    reactions,\n  } = post || {};\n  const [loading, setLoading] = useState(false);\n\n  let imageUrl = \"\";\n  if (post && post.user && post.user.imageUrl) {\n    imageUrl = post.user.imageUrl;\n  }\n\n  const [isLiked, setIsLiked] = useState(\n    authProfile && authProfile.userFavoritePosts.find((item) => item.id === id)\n  );\n  const [totalLike, setTotalLike] = useState(reactions && reactions.length);\n\n  // update reaction of post\n  const handleOnLike = () => {\n    let userInfo = {};\n    if (post.user) {\n      userInfo = {\n        id: post.user.id,\n        imageUrl: post.user.imageUrl,\n        firstName: post.user.firstName,\n        lastName: post.user.lastName,\n        githubUsername: post.user.githubUsername,\n      };\n    }\n    if (status === \"public\") {\n      likeReaction(\n        id,\n        categoryId,\n        title,\n        description,\n        setIsLiked,\n        setTotalLike,\n        userInfo\n      );\n    }\n  };\n\n  useEffect(() => {\n    setIsLiked(\n      authProfile &&\n        authProfile.userFavoritePosts.find((item) => item.id === id)\n    );\n  }, [handleOnLike, setIsLiked]);\n\n  const handleOnReportPost = () => {\n    setOpenReportModal(true);\n    setAnchorEl(null);\n  };\n\n  const handleOnDelete = (postId) => {\n    Swal.fire({\n      title: `Are you sure to delete ?`,\n      text: \"You won't be able to revert this!\",\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes, delete it!\",\n    }).then((result) => {\n      if (result.value) {\n        setLoading(true);\n        deletePost(setLoading, postId);\n      }\n    });\n  };\n\n  const totalComments = comments ? comments.length : 0;\n\n  const isPrivate = post && status === \"private\";\n\n  return (\n    <>\n      <Card className={classes.root}>\n        <CardHeader\n          avatar={\n            <Avatar\n              onClick={() => history.push(`/user-profile/${post.userId}`)}\n              aria-label=\"recipe\"\n              className={classes.avatar}\n              src={imageUrl || BASE_IMAGE_URL}\n            ></Avatar>\n          }\n          action={\n            <>\n              {isPrivate && (\n                <Tooltip title=\"Private\">\n                  <IconButton aria-label=\"delete\">\n                    <LockIcon />\n                  </IconButton>\n                </Tooltip>\n              )}\n              {!isCurrentAuth && (\n                <>\n                  <IconButton\n                    aria-controls=\"simple-menu\"\n                    aria-haspopup=\"true\"\n                    onClick={handleClick}\n                  >\n                    <MoreVertIcon />\n                  </IconButton>\n\n                  <Menu\n                    id=\"simple-menu\"\n                    anchorEl={anchorEl}\n                    keepMounted\n                    open={Boolean(anchorEl)}\n                    onClose={handleClose}\n                  >\n                    <MenuItem onClick={() => handleOnReportPost()}>\n                      Report this post\n                    </MenuItem>\n                  </Menu>\n                </>\n              )}\n            </>\n          }\n          title={\n            post && post.user && post.user.firstName && post.user.lastName\n              ? post.user.firstName + \" \" + post.user.lastName\n              : post.user.username\n          }\n          subheader={moment(createdAt).format(\"LLLL\")}\n        />\n\n        <Typography\n          variant=\"subtitle1\"\n          color=\"colorPrimary\"\n          style={{ fontSize: \"18px\" }}\n          component=\"p\"\n          className=\"ml-3\"\n        >\n          {title}\n        </Typography>\n        <CardContent className=\"p-0\">\n          <ViewText\n            textBody={truncateMultilineString(description, 350)}\n            className=\"viewMode\"\n          />\n        </CardContent>\n        <CardActions disableSpacing>\n          <span className=\"like\" style={{ color: Colors.green }}>\n            {post.view} {post.view > 1 ? \"views\" : \"view\"}\n          </span>\n          <Tooltip title=\"Like\">\n            <IconButton\n              style={{ color: isLiked || liked ? Colors.like : \"\" }}\n              aria-label=\"add to favorites\"\n              onClick={() => handleOnLike()}\n            >\n              <FavoriteIcon />\n              <span className=\"like\">{liked ? \"\" : totalLike}</span>\n            </IconButton>\n          </Tooltip>\n          {!liked && (\n            <Tooltip title=\"Comment\">\n              <IconButton\n                aria-label=\"comment\"\n                style={{ color: Colors.comment }}\n              >\n                <ChatIcon />\n                <span className=\"like\">{totalComments}</span>\n              </IconButton>\n            </Tooltip>\n          )}\n\n          {isCurrentAuth && (\n            <>\n              <Tooltip title=\"Edit\">\n                <IconButton\n                  aria-label=\"edit\"\n                  style={{ color: Colors.edit }}\n                  onClick={\n                    () => post && history.push(`/edit-post/${id}`)\n                    // window.open(`/edit-post/${id}`, \"_blank\")\n                  }\n                >\n                  <EditIcon />\n                </IconButton>\n              </Tooltip>\n\n              {window.location.pathname.includes(\"user-profile\") && (\n                <Tooltip title=\"Delete\">\n                  <IconButton\n                    aria-label=\"detete\"\n                    onClick={() => handleOnDelete(id)}\n                  >\n                    <Delete />\n                  </IconButton>\n                </Tooltip>\n              )}\n            </>\n          )}\n\n          <IconButton\n            className={classes.expand}\n            style={{ fontSize: \"16px\" }}\n            onClick={() => post && history.push(`/view-post/${id}`)}\n            aria-label=\"show more\"\n          >\n            MORE\n          </IconButton>\n        </CardActions>\n      </Card>\n      <ReportModal\n        postId={post && id}\n        modal={openReportModal}\n        setModal={setOpenReportModal}\n      />\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  authProfile: state.user_profile.user_profile,\n  authId: state.auth.user.id,\n});\nexport default connect(mapStateToProps, { likeReaction, deletePost })(PostCard);\n"]},"metadata":{},"sourceType":"module"}