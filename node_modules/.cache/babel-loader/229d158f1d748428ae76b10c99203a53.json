{"ast":null,"code":"var _jsxFileName = \"/home/thanh/booking-sport/sportbook-admin/src/components/pages/admin/UsersList.js\";\nimport React, { useEffect, useState } from \"react\";\nimport MaterialTable from \"material-table\";\nimport moment from \"moment\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { getUsers, editUserInfo, deleteUser } from \"../../../store/actions/user\";\nimport { SAVE_CURRENT_USER } from \"../../../store/actions/types\";\nimport { DATE_TIME } from \"../../../utils/common\";\nimport { forwardRef } from \"react\";\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\nimport Check from \"@material-ui/icons/Check\";\nimport EqualizerTwoToneIcon from \"@material-ui/icons/EqualizerTwoTone\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport Delete from \"@material-ui/icons/Delete\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport Search from \"@material-ui/icons/Search\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\nimport Visibility from \"@material-ui/icons/Visibility\";\nimport PageLoader from \"../../custom/PageLoader\";\nimport Swal from \"sweetalert2\";\nimport Colors from \"../../../constants/Colors\";\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /*#__PURE__*/React.createElement(AddBox, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 35\n    }\n  }))),\n  Check: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Check, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 37\n    }\n  }))),\n  Clear: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 37\n    }\n  }))),\n  // Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }))),\n  // Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => /*#__PURE__*/React.createElement(SaveAlt, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 38\n    }\n  }))),\n  Filter: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FilterList, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 38\n    }\n  }))),\n  FirstPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FirstPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 41\n    }\n  }))),\n  LastPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(LastPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 40\n    }\n  }))),\n  NextPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 40\n    }\n  }))),\n  PreviousPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronLeft, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }))),\n  ResetSearch: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 43\n    }\n  }))),\n  Search: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Search, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 38\n    }\n  }))),\n  SortArrow: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ArrowDownward, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 41\n    }\n  }))),\n  ThirdStateCheck: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Remove, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 47\n    }\n  }))),\n  ViewColumn: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ViewColumn, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 42\n    }\n  })))\n};\n\nconst UsersList = ({\n  getUsers,\n  history,\n  editUserInfo,\n  user: {\n    users\n  },\n  deleteUser\n}) => {\n  const dispatch = useDispatch();\n  const [state, setState] = useState({\n    columns: [{\n      title: \"Username\",\n      field: \"username\"\n    }, {\n      title: \"Fullname\",\n      field: \"fullname\"\n    }, {\n      title: \"Email\",\n      field: \"email\",\n      type: \"email\"\n    }, {\n      title: \"Role\",\n      field: \"role\"\n    }, {\n      title: \"Total Posts\",\n      field: \"totalPosts\",\n      editable: \"never\"\n    }, {\n      title: \"Created at\",\n      field: \"createdAt\",\n      editable: \"never\"\n    }, {\n      title: \"Updated at\",\n      field: \"updatedAt\",\n      editable: \"never\"\n    }],\n    data: [{\n      username: \"thanh_teacher\",\n      fullname: \"Nguyen le Ngocj thanh \",\n      email: \"thanh@gmail.com\",\n      role: \"Teacher\",\n      createdDate: moment(\"2020-05-29T14:49:05.661Z\").format(\"MMM DD h:mm A\")\n    }]\n  });\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    getUsers(setLoading);\n  }, []);\n\n  const getFullname = (firstname, lastname) => {\n    // console.log(firstname, lastname);\n    let fullname = \"\";\n\n    if (firstname) {\n      fullname += firstname + \" \";\n    }\n\n    if (lastname) {\n      fullname += lastname;\n    }\n\n    return fullname;\n  };\n\n  const getDateTime = date => moment(date).format(DATE_TIME);\n\n  const usersArray = Object.keys(users).map(userId => ({ ...users[userId],\n    createdAt: getDateTime(users[userId].createdAt),\n    updatedAt: getDateTime(users[userId].updatedAt),\n    fullname: getFullname(users[userId].firstName, users[userId].lastName)\n  }));\n  return /*#__PURE__*/React.createElement(PageLoader, {\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: `100%`,\n      overflowX: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MaterialTable, {\n    icons: tableIcons,\n    title: \"List Of Users\",\n    columns: state.columns,\n    data: usersArray || [],\n    options: {\n      pageSize: 8,\n      headerStyle: {\n        fontWeight: \"bold\"\n      },\n      rowStyle: {\n        overflowX: \"auto\"\n      }\n    },\n    actions: [{\n      icon: () => /*#__PURE__*/React.createElement(Visibility, {\n        style: {\n          color: Colors.view\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 27\n        }\n      }),\n      tooltip: \"View user profile\",\n      onClick: (event, rowData) => {\n        history.push(`user-profile/${rowData.id}`); // Do save operation\n      }\n    }, {\n      icon: () => /*#__PURE__*/React.createElement(Edit, {\n        style: {\n          color: Colors.orange\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 27\n        }\n      }),\n      tooltip: \"Edit User\",\n      onClick: (event, rowData) => {\n        // console.log(\"edit---\", rowData);\n        dispatch({\n          type: SAVE_CURRENT_USER,\n          currentUser: rowData\n        });\n        history.push(`/edit-user/${rowData.id}`); // Do save operation\n      }\n    }, {\n      icon: () => /*#__PURE__*/React.createElement(Delete, {\n        style: {\n          color: Colors.red\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 27\n        }\n      }),\n      tooltip: \"Delete User\",\n      onClick: (event, rowData) => {\n        Swal.fire({\n          title: `Are you sure to delete ?`,\n          text: \"You won't be able to revert this!\",\n          type: \"warning\",\n          showCancelButton: true,\n          confirmButtonColor: \"#3085d6\",\n          cancelButtonColor: \"#d33\",\n          confirmButtonText: \"Yes, delete it!\"\n        }).then(result => {\n          if (result.value) {\n            setLoading(true);\n            deleteUser(setLoading, rowData.id);\n          }\n        });\n      }\n    }, rowData => ({\n      icon: props => /*#__PURE__*/React.createElement(EqualizerTwoToneIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 32\n        }\n      }),\n      tooltip: \"Statictis\",\n      onClick: (event, rowData) => {\n        history.push(`statistics/${rowData.id}`);\n      },\n      disabled: !rowData.posts.length\n    })],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  })));\n};\n\nconst mapStateToProps = state => ({\n  user: state.user\n});\n\nexport default connect(mapStateToProps, {\n  getUsers,\n  editUserInfo,\n  deleteUser\n})(withRouter(UsersList));","map":{"version":3,"sources":["/home/thanh/booking-sport/sportbook-admin/src/components/pages/admin/UsersList.js"],"names":["React","useEffect","useState","MaterialTable","moment","connect","useDispatch","withRouter","getUsers","editUserInfo","deleteUser","SAVE_CURRENT_USER","DATE_TIME","forwardRef","AddBox","ArrowDownward","Check","EqualizerTwoToneIcon","ChevronLeft","ChevronRight","Clear","Delete","Edit","FilterList","FirstPage","LastPage","Remove","SaveAlt","Search","ViewColumn","Visibility","PageLoader","Swal","Colors","tableIcons","Add","props","ref","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","UsersList","history","user","users","dispatch","state","setState","columns","title","field","type","editable","data","username","fullname","email","role","createdDate","format","loading","setLoading","getFullname","firstname","lastname","getDateTime","date","usersArray","Object","keys","map","userId","createdAt","updatedAt","firstName","lastName","maxWidth","overflowX","pageSize","headerStyle","fontWeight","rowStyle","icon","color","view","tooltip","onClick","event","rowData","push","id","orange","currentUser","red","fire","text","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","value","disabled","posts","length","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport MaterialTable from \"material-table\";\nimport moment from \"moment\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport {\n  getUsers,\n  editUserInfo,\n  deleteUser,\n} from \"../../../store/actions/user\";\nimport { SAVE_CURRENT_USER } from \"../../../store/actions/types\";\nimport { DATE_TIME } from \"../../../utils/common\";\n\nimport { forwardRef } from \"react\";\n\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\nimport Check from \"@material-ui/icons/Check\";\nimport EqualizerTwoToneIcon from \"@material-ui/icons/EqualizerTwoTone\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport Delete from \"@material-ui/icons/Delete\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport Search from \"@material-ui/icons/Search\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\nimport Visibility from \"@material-ui/icons/Visibility\";\n\nimport PageLoader from \"../../custom/PageLoader\";\nimport Swal from \"sweetalert2\";\nimport Colors from \"../../../constants/Colors\";\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  // Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  // Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\n};\n\nconst UsersList = ({\n  getUsers,\n  history,\n  editUserInfo,\n  user: { users },\n  deleteUser,\n}) => {\n  const dispatch = useDispatch();\n  const [state, setState] = useState({\n    columns: [\n      { title: \"Username\", field: \"username\" },\n      { title: \"Fullname\", field: \"fullname\" },\n      { title: \"Email\", field: \"email\", type: \"email\" },\n      {\n        title: \"Role\",\n        field: \"role\",\n      },\n      {\n        title: \"Total Posts\",\n        field: \"totalPosts\",\n        editable: \"never\",\n      },\n      {\n        title: \"Created at\",\n        field: \"createdAt\",\n        editable: \"never\",\n      },\n      {\n        title: \"Updated at\",\n        field: \"updatedAt\",\n        editable: \"never\",\n      },\n    ],\n    data: [\n      {\n        username: \"thanh_teacher\",\n        fullname: \"Nguyen le Ngocj thanh \",\n        email: \"thanh@gmail.com\",\n        role: \"Teacher\",\n        createdDate: moment(\"2020-05-29T14:49:05.661Z\").format(\"MMM DD h:mm A\"),\n      },\n    ],\n  });\n\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    getUsers(setLoading);\n  }, []);\n\n  const getFullname = (firstname, lastname) => {\n    // console.log(firstname, lastname);\n    let fullname = \"\";\n    if (firstname) {\n      fullname += firstname + \" \";\n    }\n    if (lastname) {\n      fullname += lastname;\n    }\n    return fullname;\n  };\n\n  const getDateTime = (date) => moment(date).format(DATE_TIME);\n\n  const usersArray = Object.keys(users).map((userId) => ({\n    ...users[userId],\n    createdAt: getDateTime(users[userId].createdAt),\n    updatedAt: getDateTime(users[userId].updatedAt),\n    fullname: getFullname(users[userId].firstName, users[userId].lastName),\n  }));\n\n  return (\n    <PageLoader loading={loading}>\n      <div style={{ maxWidth: `100%`, overflowX: \"auto\" }}>\n        <MaterialTable\n          icons={tableIcons}\n          title=\"List Of Users\"\n          columns={state.columns}\n          data={usersArray || []}\n          options={{\n            pageSize: 8,\n            headerStyle: {\n              fontWeight: \"bold\",\n            },\n            rowStyle: {\n              overflowX: \"auto\",\n            },\n          }}\n          actions={[\n            {\n              icon: () => <Visibility style={{ color: Colors.view }} />,\n              tooltip: \"View user profile\",\n              onClick: (event, rowData) => {\n                history.push(`user-profile/${rowData.id}`);\n                // Do save operation\n              },\n            },\n            {\n              icon: () => <Edit style={{ color: Colors.orange }}/>,\n              tooltip: \"Edit User\",\n              onClick: (event, rowData) => {\n                // console.log(\"edit---\", rowData);\n                dispatch({\n                  type: SAVE_CURRENT_USER,\n                  currentUser: rowData,\n                });\n                history.push(`/edit-user/${rowData.id}`);\n                // Do save operation\n              },\n            },\n            {\n              icon: () => <Delete style={{ color: Colors.red }}/>,\n              tooltip: \"Delete User\",\n              onClick: (event, rowData) => {\n                Swal.fire({\n                  title: `Are you sure to delete ?`,\n                  text: \"You won't be able to revert this!\",\n                  type: \"warning\",\n                  showCancelButton: true,\n                  confirmButtonColor: \"#3085d6\",\n                  cancelButtonColor: \"#d33\",\n                  confirmButtonText: \"Yes, delete it!\",\n                }).then((result) => {\n                  if (result.value) {\n                    setLoading(true);\n                    deleteUser(setLoading, rowData.id);\n                  }\n                });\n              },\n            },\n            rowData => ({\n              icon: (props) => <EqualizerTwoToneIcon  />,\n              tooltip: \"Statictis\",\n              onClick: (event, rowData) => {\n                history.push(`statistics/${rowData.id}`);\n              },\n              disabled: !rowData.posts.length\n            }),\n            \n          ]}\n        />\n      </div>\n    </PageLoader>\n  );\n};\nconst mapStateToProps = (state) => ({\n  user: state.user,\n});\nexport default connect(mapStateToProps, {\n  getUsers,\n  editUserInfo,\n  deleteUser,\n})(withRouter(UsersList));\n"]},"metadata":{},"sourceType":"module"}